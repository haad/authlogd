<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>
			Authlogd server
		</title>
		<link rel="stylesheet" href="css/main.css" type="text/css" media="screen" />
	</head>
	<body>
		<p>
			<a href="http://github.com/haad/authlogd"><img style="position: absolute; top: 0; right: 0; border: 0;" src="images/forkme_right_darkblue_121621.png" alt="Fork me on GitHub" /></a>
		</p>
		<div id="container">
			<div class="download">
				<a href="http://github.com/haad/authlogd/zipball/master"><img width="90" src="images/zip.png" alt="zip source code package"/></a> <a href="http://github.com/haad/authlogd/tarball/master"><img width="90" src="images/tar.png" alt="tarball source code package"/></a>
			</div>
			<h1>Authentication Logging daemon.</h1>
			<div class="description">
				<p>
					Authlogd is a server which authenticates syslog messages logged through the socket on which server is listening. 
					Authlogd keep list of authenticated loggers in a configuration file and verify every message sender against this list.
				</p>
				<img width="480" src="images/authlogd.png" alt="authlogd use case diagram"/>
				<p>
					Authentication is done by adding one SD element with local defined SD element ID, 
					auth message and DSA made to protect whole auth SD element.
				</p>
				<img width="480" src="images/authlogd_flow.png" alt="authlogd flow chart"/>
				<hr />
			</div>
			<div class="deps">
			<h2>Dependencies</h2>
			<p>
				Authlogd requires some libc patches(or you need to set up you application to log though 
				different socket than /var/run/log), openssl an libevent libraries. Daemon requires proc filesystem 
				mounted in /proc directory in a Linux compatible mode.
			</p>
			</div>
			<div class="documentation">
				<h2>User Documentation</h2>
					<h3>Config file</h3>
						<p>As a configuration file we use externalized proplib dictionary with two entries. 
						First entry is "config" and the second one is "sign". Sign part of file contains DSA
						hash of config part. Example config file can be found at 
						<a href="authlogd.xml.txt">config file</a></p>
					<div>
					<h3>User doc</h3>
					<div>
					<h4>Server startup</h4>
						<pre>./authlogd -c doc/authlogd_app.xml -p doc/dsapubkey.pem -P doc/dsaprivkey.pem -C doc/dsacert.pem</pre>
					</div>
					<div>
					<h4>Run tests</h4>

					<pre>make &amp;&amp; atf-run | atf-report</pre>
					</div>
					<div>
					<h4>OpenSSL Howto</h4>
					<h5>Key Generation</h5>
						For more information look at <a href="http://madboa.com/geek/openssl/#key-dsa">[1]</a>,<a href="http://www.openssl.org/docs/HOWTO/certificates.txt">[2]</a>.

						<ul>
						<li><pre>openssl dsaparam -noout -out dsakey.pem -genkey 1025</pre></li>
						<li><pre>openssl req -new -x509 -key dsakey.pem -out dsacert.pem -days 1095</pre></li>
						<li><pre>openssl dsa -in dsakey.pem -pubout -out dsapubkey.pem</pre></li>
						</ul>
					</div>
					<div>
					<h5>Signature Generation</h5>

						<pre>openssl dgst -sha1 -sign doc/dsaprivkey.pem -keyform PEM -hex {filename to sign}</pre>
					</div>
					<div>
					<h5>Signature verification</h5> 

						<pre>openssl dgst -sha1 -verify doc/dsapubkey.pem -signature {signature file} {signed file}</pre>
					</div>
					<div>		
					<h5>Authlogd part</h5>

						<pre>authlogd -c doc/authlogd_app.xml -d  -> dump singing part of configuration to config.xml</pre>
					</div>
					</div>		
						
			</div>
			<div class="license">
			<h2>License</h2>
			<p>
				2 clause BSD license
			</p>
			</div>
			<div class="author">
			<h2>Authors</h2>
			<p>
				Adam Hamsik </p><address>haad@netbsd.org</address><p> or faculty mail </p><address>xhamsik@fiit.stuba.sk</address><br/>
			
			</div>
			<h2>Download</h2>
			<p>
				You can download this project in either <a href="http://github.com/haad/authlogd/zipball/master">zip</a> or <a href="http://github.com/haad/authlogd/tarball/master">tar</a> formats.
			</p>
			<p>
				You can also clone the project with <a href="http://git-scm.com">Git</a> by running:
			</p>
			<pre>$ git clone git://github.com/haad/authlogd</pre>
			<div class="footer">
				get the source code on GitHub : <a href="http://github.com/haad/authlogd">haad/authlogd</a>
			</div>
			<div class="footer">
			<p>
			    <a href="http://validator.w3.org/check?uri=referer"><img
			       	src="http://www.w3.org/Icons/valid-xhtml10"
				alt="Valid XHTML 1.0 Strict" height="31" width="88" /></a>
			
			    <a href="http://jigsaw.w3.org/css-validator/check/referer"><img 
				style="border:0;width:88px;height:31px"
				src="http://jigsaw.w3.org/css-validator/images/vcss"
				alt="Valid CSS!" /></a>
			</p>
			</div>
		</div>
		
	</body>
</html>
